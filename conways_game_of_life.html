<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Conway's Game of Life</title>
<style>
  #board {
    display: grid;
    grid-template-columns: repeat(20, 20px);
    width: max-content;
    margin: 20px auto;
    border: 1px solid black;
  }
  .cell {
    width: 20px;
    height: 20px;
    border: 1px solid #ccc;
    background: white;
  }
  .alive {
    background: black;
  }
  #controls {
    text-align: center;
    margin-top: 10px;
  }
  button {
    margin: 0 5px;
    padding: 5px 10px;
  }
</style>
</head>
<body>

<h2 style="text-align:center;">Conway's Game of Life</h2>
<div id="board"></div>

<div id="controls">
  <button id="nextBtn">Next Generation</button>
  <button id="playBtn">Play</button>
  <button id="pauseBtn">Pause</button>
</div>
</div>

<script>
  // Alec Slavik, static 20x20 board
  const rows = 20;
  const cols = 20;
  const board = document.getElementById("board");

  // 2D array to store state: 0 = dead, 1 = alive
  let grid = Array.from({ length: rows }, () => Array(cols).fill(0));
  let intervalId = null; // for play/pause control
  
  // Create board and add click toggles
  function createBoard() {
    for (let r = 0; r < rows; r++) {
      for (let c = 0; c < cols; c++) {
        const cell = document.createElement("div");
        cell.classList.add("cell");
        cell.dataset.row = r;
        cell.dataset.col = c;
        cell.addEventListener("click", () => toggleCell(r, c, cell));
        board.appendChild(cell);
      }
    }
  }

  function toggleCell(r, c, element) {
    grid[r][c] = grid[r][c] === 0 ? 1 : 0;
    element.classList.toggle("alive");
  }

  // Count alive neighbors - Created by Nick Reinig
  function countNeighbors(r, c) {
    let count = 0;
    for (let dr = -1; dr <= 1; dr++) {
      for (let dc = -1; dc <= 1; dc++) {
        if (dr === 0 && dc === 0) continue;
        const nr = r + dr;
        const nc = c + dc;
        if (nr >= 0 && nr < rows && nc >= 0 && nc < cols) {
          count += grid[nr][nc];
        }
      }
    }
    return count;
  }

  // Compute next generation - Created by Nick Reinig
  function nextGeneration() {
    const newGrid = Array.from({ length: rows }, () => Array(cols).fill(0)); // create new grid that will replace the current grid
	
    // Apply rules to new grid based on state of current grid
    for (let r = 0; r < rows; r++) {
      for (let c = 0; c < cols; c++) {
        const neighbors = countNeighbors(r, c);

        // Conway's rules
        if (grid[r][c] === 1 && (neighbors === 2 || neighbors === 3)) {
          newGrid[r][c] = 1; // stays alive -- Created by Ted Athon
        } else if (grid[r][c] === 0 && neighbors === 3) {
          newGrid[r][c] = 1; // reproduction -- Created by Amrit Sian
        } else {
          newGrid[r][c] = 0; // dies or stays dead -- rules by Dylan O'Brien and Divit Kannan -- Combined into one by Nick Reinig
        }
      }
    }
	//replace the grid with the new grid, then update the board
    grid = newGrid;
    updateBoard();
  }

  // Update visuals - Created by Nick Reinig
  function updateBoard() {
    const cells = document.querySelectorAll(".cell");
    cells.forEach(cell => {
      const r = parseInt(cell.dataset.row);
      const c = parseInt(cell.dataset.col);
      cell.classList.toggle("alive", grid[r][c] === 1);
    });
  }

  // Control functions - Created by Nick Reinig
  function play() {
    if (!intervalId) {
      intervalId = setInterval(nextGeneration, 300); // runs every 300ms
    }
  }

  function pause() {
    clearInterval(intervalId);
    intervalId = null;
  }

  // Hook up buttons - Created by Nick Reinig
  document.getElementById("nextBtn").addEventListener("click", nextGeneration);
  document.getElementById("playBtn").addEventListener("click", play);
  document.getElementById("pauseBtn").addEventListener("click", pause);

  createBoard();
</script>

</body>
</html>
